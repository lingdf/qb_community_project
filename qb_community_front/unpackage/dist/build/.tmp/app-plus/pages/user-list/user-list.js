(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user-list/user-list"],{4503:function(t,e,n){"use strict";n.r(e);var i=n("dbb2"),r=n.n(i);for(var a in i)"default"!==a&&function(t){n.d(e,t,function(){return i[t]})}(a);e["default"]=r.a},9933:function(t,e,n){"use strict";(function(t){n("78d4"),n("921b");i(n("66fd"));var e=i(n("cebe"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},cebe:function(t,e,n){"use strict";n.r(e);var i=n("f790"),r=n("4503");for(var a in r)"default"!==a&&function(t){n.d(e,t,function(){return r[t]})}(a);var s=n("2877"),u=Object(s["a"])(r["default"],i["a"],i["b"],!1,null,null,null);e["default"]=u.exports},dbb2:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a"));function r(t){return t&&t.__esModule?t:{default:t}}function a(t,e){return o(t)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var n=[],i=!0,r=!1,a=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0)if(n.push(s.value),e&&n.length===e)break}catch(o){r=!0,a=o}finally{try{i||null==u["return"]||u["return"]()}finally{if(r)throw a}}return n}function o(t){if(Array.isArray(t))return t}function c(t,e,n,i,r,a,s){try{var u=t[a](s),o=u.value}catch(c){return void n(c)}u.done?e(o):Promise.resolve(o).then(i,r)}function f(t){return function(){var e=this,n=arguments;return new Promise(function(i,r){var a=t.apply(e,n);function s(t){c(a,i,r,s,u,"next",t)}function u(t){c(a,i,r,s,u,"throw",t)}s(void 0)})}}var l=function(){return n.e("components/index/swiper-tab-head").then(n.bind(null,"f1f1"))},d=function(){return n.e("components/user-list/friend-list").then(n.bind(null,"f9e5"))},h=function(){return n.e("components/common/no-thing").then(n.bind(null,"35b5"))},p={components:{swiperTabHead:l,friendList:d,noThing:h},data:function(){return{tabIndex:0,swiperHeight:0,tabBars:[{name:"互相关注",id:"otherFocus",num:0},{name:"已关注",id:"focus",num:0},{name:"粉丝",id:"fans",num:0}],friendList:[{stateClass:"icon-huguan",list:[]},{stateClass:"icon-pinglunicon-",list:[]},{stateClass:"icon-icon-add",list:[]}]}},onLoad:function(){var e=this;this.__initData(),t.getSystemInfo({success:function(n){var i=n.windowHeight-t.upx2px(100);e.swiperHeight=i}})},onNavigationBarButtonTap:function(e){0==e.index&&t.navigateBack({delta:1})},onNavigationBarSearchInputClicked:function(){t.navigateTo({url:"../search/search?searchType=user"})},methods:{__initData:function(){var t=f(i.default.mark(function t(){return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getFriends();case 2:return t.next=4,this.getFollows();case 4:return t.next=6,this.getFans();case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),checkIsFriend:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=this.friendList[0].list[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;if(s.id==t)return!0}}catch(u){n=!0,i=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}return!1},getFriends:function(){var e=f(i.default.mark(function e(){var n,r,s,u,o,c,f,l,d,h,p,v;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("handle/friends?user_id=".concat(this.User.userinfo.id));case 2:if(n=e.sent,r=a(n,2),s=r[0],u=r[1],s){e.next=34;break}if(o=u.data,200!=o.code){e.next=31;break}for(this.tabBars[0].num=o.data.length,c=!0,f=!1,l=void 0,e.prev=13,d=o.data[Symbol.iterator]();!(c=(h=d.next()).done);c=!0)p=h.value,v={id:p.id,uimg:p.userpic,uname:p.username,sex:p.userinfo.sex,age:p.userinfo.age,type:"icon-huguan"},this.friendList[0].list.push(v);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),f=!0,l=e.t0;case 21:e.prev=21,e.prev=22,c||null==d.return||d.return();case 24:if(e.prev=24,!f){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=32;break;case 31:t.showToast({title:"好友列表获取失败"});case 32:e.next=35;break;case 34:t.showToast({title:"好友列表获取失败"});case 35:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28]])}));function n(){return e.apply(this,arguments)}return n}(),getFans:function(){var e=f(i.default.mark(function e(){var n,r,s,u,o,c,f,l,d,h,p,v;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("handle/fans?user_id=".concat(this.User.userinfo.id));case 2:if(n=e.sent,r=a(n,2),s=r[0],u=r[1],s){e.next=34;break}if(o=u.data,200!=o.code){e.next=31;break}for(this.tabBars[2].num=o.data.length,c=!0,f=!1,l=void 0,e.prev=13,d=o.data[Symbol.iterator]();!(c=(h=d.next()).done);c=!0)p=h.value,v={id:p.id,uimg:p.userpic,uname:p.username,sex:p.userinfo.sex,age:p.userinfo.age,type:this.checkIsFriend(p.id)?"icon-huguan":"icon-icon-add"},this.friendList[2].list.push(v);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),f=!0,l=e.t0;case 21:e.prev=21,e.prev=22,c||null==d.return||d.return();case 24:if(e.prev=24,!f){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=32;break;case 31:t.showToast({title:"好友列表获取失败"});case 32:e.next=35;break;case 34:t.showToast({title:"好友列表获取失败"});case 35:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28]])}));function n(){return e.apply(this,arguments)}return n}(),getFollows:function(){var e=f(i.default.mark(function e(){var n,r,s,u,o,c,f,l,d,h,p,v;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.$http.get("handle/follows?user_id=".concat(this.User.userinfo.id));case 2:if(n=e.sent,r=a(n,2),s=r[0],u=r[1],s){e.next=34;break}if(o=u.data,200!=o.code){e.next=31;break}for(this.tabBars[1].num=o.data.length,c=!0,f=!1,l=void 0,e.prev=13,d=o.data[Symbol.iterator]();!(c=(h=d.next()).done);c=!0)p=h.value,v={id:p.id,uimg:p.userpic,uname:p.username,sex:p.userinfo.sex,age:p.userinfo.age,type:this.checkIsFriend(p.id)?"icon-huguan":"icon-pinglunicon-"},this.friendList[1].list.push(v);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),f=!0,l=e.t0;case 21:e.prev=21,e.prev=22,c||null==d.return||d.return();case 24:if(e.prev=24,!f){e.next=27;break}throw l;case 27:return e.finish(24);case 28:return e.finish(21);case 29:e.next=32;break;case 31:t.showToast({title:"好友列表获取失败"});case 32:e.next=35;break;case 34:t.showToast({title:"好友列表获取失败"});case 35:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28]])}));function n(){return e.apply(this,arguments)}return n}(),escFocus:function(t){if("icon-huguan"==t.src){for(var e,n=0;n<this.friendList[0].list.length;n++)this.friendList[0].list[n].id==t.id&&(this.tabBars[0].num--,e=this.friendList[0].list.splice(n,1));for(n=0;n<this.friendList[1].list.length;n++)this.friendList[1].list[n].id==t.id&&(e=this.friendList[1].list.splice(n,1),this.tabBars[1].num--);var i=!0,r=!1,a=void 0;try{for(var s,u=this.friendList[2].list[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var o=s.value;e[0].id==o.id&&(o.type="icon-icon-add")}}catch(c){r=!0,a=c}finally{try{i||null==u.return||u.return()}finally{if(r)throw a}}}else if("icon-pinglunicon-"==t.src)for(n=0;n<this.friendList[1].list.length;n++)this.friendList[1].list[n].id==t.id&&(this.friendList[1].list.splice(n,1),this.tabBars[1].num--)},focus:function(t){var e=!0,n=!1,i=void 0;try{for(var r,a=this.friendList[2].list[Symbol.iterator]();!(e=(r=a.next()).done);e=!0){var s=r.value;s.id==t.id&&(s.type="icon-huguan",this.friendList[0].list.unshift(s),this.friendList[1].list.unshift(s),this.tabBars[0].num++,this.tabBars[1].num++)}}catch(u){n=!0,i=u}finally{try{e||null==a.return||a.return()}finally{if(n)throw i}}},goUser:function(e){t.navigateTo({url:"../user-space/user-space?userid="+e.id})},tabtap:function(t){this.tabIndex=t},tabChange:function(t){this.tabIndex=t.detail.current}}};e.default=p}).call(this,n("6e42")["default"])},f790:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},r=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return r})}},[["9933","common/runtime","common/vendor"]]]);