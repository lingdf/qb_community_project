(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/detail/detail"],{"1f51":function(t,e,n){"use strict";n.r(e);var i=n("81fe"),a=n("ec0c");for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);n("911a");var o=n("2877"),s=Object(o["a"])(a["default"],i["a"],i["b"],!1,null,null,null);e["default"]=s.exports},"42f6":function(t,e,n){},"69e4":function(t,e,n){"use strict";(function(t){n("78d4"),n("921b");i(n("66fd"));var e=i(n("1f51"));function i(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,n("6e42")["createPage"])},"81fe":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},"911a":function(t,e,n){"use strict";var i=n("42f6"),a=n.n(i);a.a},ac57:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(n("a34a")),a=r(n("1bce"));function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){return c(t)||u(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function u(t,e){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=t[Symbol.iterator]();!(i=(o=s.next()).done);i=!0)if(n.push(o.value),e&&n.length===e)break}catch(u){a=!0,r=u}finally{try{i||null==s["return"]||s["return"]()}finally{if(a)throw r}}return n}function c(t){if(Array.isArray(t))return t}function f(t,e,n,i,a,r,o){try{var s=t[r](o),u=s.value}catch(c){return void n(c)}s.done?e(u):Promise.resolve(u).then(i,a)}function d(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var r=t.apply(e,n);function o(t){f(r,i,a,o,s,"next",t)}function s(t){f(r,i,a,o,s,"throw",t)}o(void 0)})}}var l=function(){return n.e("components/detail/detail-info").then(n.bind(null,"8063"))},h=function(){return n.e("components/detail/comment-list").then(n.bind(null,"03da"))},m=function(){return n.e("components/user-chat/user-chat-bottom").then(n.bind(null,"725b"))},p=function(){return Promise.all([n.e("common/vendor"),n.e("components/common/more-share")]).then(n.bind(null,"80c8"))},v={components:{detailInfo:l,commentList:h,userChatBottom:m,moreShare:p},data:function(){return{shareShow:!1,commentData:{count:0,list:[]},shareDate:{title:"",url:"",titlepic:"",shareType:0},shares:"",detailInfo:"",focus:!1,reply_id:0}},onLoad:function(t){this.initData(JSON.parse(t.detailData)),this.initShareDate(JSON.parse(t.detailData)),this.getComment()},onNavigationBarButtonTap:function(t){0==t.index&&this.toggleShare()},methods:{initShareDate:function(t){this.shareDate={title:t.title,content:t.content,url:"https://codelin.site/",titlepic:t.titimg,shareType:0},this.shares={post_id:t.id,sharenum:t.sharenum}},initData:function(e){t.setNavigationBarTitle({title:e.title}),t.showLoading({title:"Loading...",mask:!0}),this.detailInfo={id:e.id,username:e.uname||e.username,user_id:e.user_id,userimg:e.uimg||e.userimg,infotime:e.create_time,isFocus:e.isFocus,content:e.content,age:e.age,sex:e.sex,path:e.path,type:"img",infonum:e.infonum,commentnum:e.commentnum,sharenum:e.sharenum,infoImgs:[]},this.getPost(e.id),this.getComment(this.detailInfo.id)},getPost:function(){var e=d(i.default.mark(function e(n){var a,r,s,u,c,f,d,l,h,m,p,v;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return a="index/post?id=".concat(n),e.next=3,this.$http.get(a);case 3:if(r=e.sent,s=o(r,2),s[0],u=s[1],c=u.data,200!=c.code){e.next=32;break}for(f=c.data[0],d=!0,l=!1,h=void 0,e.prev=13,m=f.imgList[Symbol.iterator]();!(d=(p=m.next()).done);d=!0)v=p.value,this.detailInfo.infoImgs.push(v.url);e.next=21;break;case 17:e.prev=17,e.t0=e["catch"](13),l=!0,h=e.t0;case 21:e.prev=21,e.prev=22,d||null==m.return||m.return();case 24:if(e.prev=24,!l){e.next=27;break}throw h;case 27:return e.finish(24);case 28:return e.finish(21);case 29:t.hideLoading(),e.next=33;break;case 32:t.showToast({title:"网络开小差啦~",icon:"none"});case 33:case"end":return e.stop()}},e,this,[[13,17,21,29],[22,,24,28]])}));function n(t){return e.apply(this,arguments)}return n}(),getComment:function(){var t=d(i.default.mark(function t(e){var n,a,r,s,u,c;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n="index/getComment?post_id=".concat(e),t.next=3,this.$http.get(n);case 3:if(a=t.sent,r=o(a,2),s=r[0],u=r[1],s){t.next=12;break}c=u.data,200==c.code&&(this.commentData.count=c.data.length,this.commentData.list=this.commentData.list.concat(this.__ArrSort(c.data))),t.next=13;break;case 12:return t.abrupt("return");case 13:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),__ArrSort:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=0,r=function t(e,i,r){for(var o=0;o<e.length;o++){var s=e[o];s.fid==i&&(s.lev=r,n.push({id:s.id,fid:s.fid,userimg:s.user.userpic,username:s.user.username,time:a.default.gettime.gettime(s.create_time),data:s.data}),t(e,s.id,r+1))}};return r(t,e,i),n},sendText:function(){var e=d(i.default.mark(function e(n){var r,s,u,c,f,d,l,h,m,p;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(this.User.userinfo){e.next=3;break}return t.showToast({title:"登录后才能评论",icon:"none"}),e.abrupt("return");case 3:return r=this.reply_id,t.showLoading({title:"评论中...",mask:!1}),s="handle/comment",u={user_id:this.User.userinfo.id,fid:r,data:n,post_id:this.detailInfo.id},e.next=9,this.$http.post(s,u);case 9:if(c=e.sent,f=o(c,2),d=f[0],l=f[1],d){e.next=27;break}if(h=l.data,200!=h.code){e.next=25;break}if(t.showToast({title:"评论成功"}),t.hideLoading(),m={id:h.data,fid:r,userimg:this.User.userinfo.userpic,username:this.User.userinfo.username,time:a.default.gettime.gettime((new Date).getTime()),data:n},this.commentData.count++,this.detailInfo.commentnum++,0!==r){e.next=23;break}return e.abrupt("return",this.commentData.list.push(m));case 23:p=this.commentData.list.findIndex(function(t){return t.id===r}),p>-1&&this.commentData.list.splice(p+1,0,m);case 25:e.next=28;break;case 27:t.showToast({title:"评论失败~",icon:"none"});case 28:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}(),replyComment:function(t){this.focus=!0,this.reply_id=t.id},toggleShare:function(){this.shareShow=!this.shareShow},updateDate:function(t){switch(t.type){case"onFocus":this.updateFocus(t);break}},updateFocus:function(t){this.detailInfo.isFocus=t.data},updateShare:function(t){this.detailInfo.sharenum=t},blur:function(){this.focus=!1,this.reply_id=0}}};e.default=v}).call(this,n("6e42")["default"])},ec0c:function(t,e,n){"use strict";n.r(e);var i=n("ac57"),a=n.n(i);for(var r in i)"default"!==r&&function(t){n.d(e,t,function(){return i[t]})}(r);e["default"]=a.a}},[["69e4","common/runtime","common/vendor"]]]);